<!DOCTYPE html>
<html>
<head>
    <title>Fish Caught Near Bakersfield</title>
<% include partials/header %>
<% include partials/loginbar %>
<% include partials/message %>
    <div class="container">
      <div class="box">
	       <p style="font-size: 27px"><img src="/icons/feed.svg" class="svg-icon-md"> Fish Caught Near Bakersfield:</p>
         <hr>
         <!-- CATCH CARDS -->
         <div class="masonry">
           <% for (var i = 0; i < posts.length; i++) { %>
  		         <div class="item">
		               <div class="card">
                     <div class="card-header">
                       <figure class="image">
                         <img src="<%= posts[i].image %>" alt="<%= posts[i].species %>">
                       </figure>
                     </div>
                     <div class="card-content">
                       <div class="media">
                         <div class="media-content">
                           <p class="title is-4"><img src="/icons/user.svg" class="svg-icon-20"><%= posts[i].author.username %></p>
                           <p class="subtitle is-6"><a style="color: black;" href="/locations/<%= posts[i].catchlocationid %>">
                             <img src="/icons/map-sign.svg" class="svg-icon-small">&nbsp;<%= posts[i].catchlocation %></a>
                           </p>
                         </div>
                       </div>
                       <div class="content">
                         <%= posts[i].description %>
                         <br>
                         <time><img src="/icons/calendar.svg" class="svg-icon-small"><%= posts[i].createdAt.toDateString() %></time>
                       </div>
                     </div>
							       <footer class="card-footer">
                       <a class="card-footer-item" href="/catch/<%= posts[i]._id %>">
                         <img src="/icons/anchor.svg" class="svg-icon-small">&nbsp;<p style="color: black;">Open</p>
                       </a>
                     </footer>
                   </div>
                 </div>
                 <br>
           <% } %>
        </div>
      </div>
      <% if (pages > 0) { %>
        <nav class="pagination" role="navigation" aria-label="pagination">
        <% if (Number(current) - 1 > 0) { %>
          <a class="pagination-previous" href="/catches/<%= Number(current) - 1 %>"><img src="/icons/circle-arrow-left.svg" class="svg-icon-small">Previous</a>
        <% } else { %>
	        <a class="pagination-previous" disabled><img src="/icons/circle-arrow-left.svg" class="svg-icon-small">Previous</a>
	      <% } %>
	      <% if (Number(current) + 1 <= pages) { %>
          <a href="/catches/<%= Number(current) + 1 %>" class="pagination-next"><img src="/icons/circle-arrow-right.svg" class="svg-icon-small">Next page</a>
        <% } else { %>
          <a class="pagination-next" disabled><img src="/icons/circle-arrow-right.svg" class="svg-icon-small">Next page</a>
	      <% } %>
        <ul class="pagination-list">
        <% var i = (Number(current) > 3 ? Number(current) - 2 : 1) %>
          <% if (current == 1) { %>
            <li>
               <a class="pagination-link" disabled>First</a>
            </li>
          <% } else { %>
            <li>
               <a class="pagination-link" href="/catches/1">First</a>
            </li>
	    		<% } %>
            <% for (; i <= (Number(current) + 2) && i <= pages; i++) { %>
              <% if (i == current) { %>
                <li>
                   <a class="pagination-link is-current"><%= i %></a>
                </li>
              <% } else { %>
		             <li>
			             <a class="pagination-link" href="/catches/<%= i %>"><%= i %></a>
		             </li>
		          <% } %>
		          <% } %>
          <% if (current == pages) { %>
				   <li>
		    	   <a class="pagination-link" disabled>Last</a>
				   </li>
          <% } else { %>
				   <li>
		    		<a href="/catches/<%= pages %>" class="pagination-link">Last</a>
				   </li>
          <% } %>
          </ul>
        </nav>
        <% } %>
      </div>
<% include partials/footer %>
